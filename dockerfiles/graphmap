#Base images
FROM ubuntu:16.04

#Constants
ARG GRAPHMAP_VERSION=0.3.0

#Setup
RUN apt-get update \
 && apt-get -y install make \
                       build-essential \
                       libz-dev \
                       git

#Set Workdir
WORKDIR /software

#Install graphmap
RUN git clone https://github.com/isovic/graphmap.git
WORKDIR /software/graphmap
RUN git checkout v${GRAPHMAP_VERSION}
RUN make modules
RUN make rebuild
ENV PATH="/software/graphmap/bin/Linux-x64:${PATH}"
RUN chmod +x /software/graphmap/bin/Linux-x64/graphmap

#Cleanup
RUN apt-get clean
